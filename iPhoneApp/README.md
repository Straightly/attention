# ToDo App - iPhone Version

This is a native iPhone app wrapper for the Attention ToDo App using Capacitor. It wraps the web version from `/docs` and provides a native iOS experience.

## Project Structure

```
iPhoneApp/
├── www/                    # Web app files (copied from ../docs/)
│   ├── index.html
│   ├── style.css
│   ├── config.js
│   └── js/                # JavaScript modules
├── ios/                   # Native iOS project (generated by Capacitor)
│   └── App/
│       └── App.xcworkspace  # Open this in Xcode
├── capacitor.config.json  # Capacitor configuration
├── package.json          # Node.js dependencies
└── README.md            # This file
```

## Features

- ✅ Native iPhone app experience
- ✅ Syncs with GitHub using GitHub API
- ✅ Works with your existing GitHub token
- ✅ Stores data in `ToDos/List.json` in your GitHub repo
- ✅ All features from web version (tags, inline editing, etc.)

## Prerequisites

- Xcode (installed)
- Node.js and npm (installed)
- CocoaPods (installed)
- Capacitor CLI (installed)
- iPhone with Developer Mode enabled
- Apple ID added to Xcode

## Initial Setup (Already Complete)

The app has been set up with:
1. Capacitor project initialized
2. Web files copied from `../docs/`
3. iOS platform added
4. Xcode project configured
5. Signing configured with your Apple ID

## Updating Your App

When you make changes to your ToDoApp, follow these steps to update the iPhone app:

### Step 1: Make Changes to ToDoApp

Edit your code in `/Users/zan/z/attention/ToDoApp/`:
- Modify HTML, CSS, or JavaScript
- Test in browser as usual
- Make sure everything works

### Step 2: Copy to Production (GitHub Pages)

```bash
cd /Users/zan/z/attention
./copy-to-docs.sh
```

This copies your changes from `ToDoApp/` to `docs/` folder.

### Step 3: Sync to iPhone App

```bash
cd /Users/zan/z/attention/iPhoneApp
npx cap sync
```

This command:
- Copies web files from `www/` to the iOS app
- Updates native dependencies if needed
- Takes ~5 seconds

### Step 4: Deploy to iPhone

```bash
npx cap open ios
```

This opens Xcode. Then:
1. Make sure your iPhone is selected at the top
2. Press **Cmd+R** (or click the Play button ▶️)
3. Wait for build (~30 seconds)
4. App will update on your iPhone

### Quick Update Script

You can create a script to automate steps 3-4:

```bash
#!/bin/bash
# update-iphone-app.sh

cd /Users/zan/z/attention/iPhoneApp
echo "Syncing web files to iOS..."
npx cap sync
echo "Opening Xcode..."
npx cap open ios
echo "✅ Ready! Press Cmd+R in Xcode to deploy to your iPhone"
```

Make it executable:
```bash
chmod +x update-iphone-app.sh
```

Then run:
```bash
./update-iphone-app.sh
```

## Important Notes

### App Expiration (Free Apple ID)

With a free Apple ID, your app will expire after **7 days**:
- After 7 days, the app won't launch on your iPhone
- Shows "Unable to Verify App" error
- **Solution:** Reconnect iPhone and redeploy from Xcode (takes ~1 minute)

To refresh the app:
```bash
cd /Users/zan/z/attention/iPhoneApp
npx cap open ios
# Press Cmd+R in Xcode
```

### Paid Apple Developer Account ($99/year)

If you upgrade to a paid account:
- App works for **1 year** between deployments
- Can distribute via TestFlight
- Can submit to App Store

## Troubleshooting

### "Untrusted Developer" Error

On your iPhone:
1. Go to **Settings → General → VPN & Device Management**
2. Tap on your email
3. Tap **"Trust [your email]"**
4. Tap **"Trust"** again

### "No Provisioning Profile" Error

1. Connect your iPhone via USB
2. In Xcode: Select your project → Signing & Capabilities
3. Make sure "Automatically manage signing" is checked
4. Select your Apple ID under "Team"

### Developer Mode Not Enabled

On your iPhone (iOS 16+):
1. Go to **Settings → Privacy & Security → Developer Mode**
2. Toggle **Developer Mode** ON
3. Restart your iPhone
4. Confirm when prompted

### Build Fails

Try these in order:
1. Clean build: In Xcode, **Product → Clean Build Folder** (Cmd+Shift+K)
2. Sync again: `npx cap sync`
3. Reinstall pods:
   ```bash
   cd ios/App
   pod install
   cd ../..
   ```

### Changes Not Showing Up

Make sure you:
1. Copied files to `docs/` folder first
2. Ran `npx cap sync` to copy to iOS
3. Rebuilt the app in Xcode (Cmd+R)

## Development Workflow Summary

```
1. Edit code in ToDoApp/
   ↓
2. Test in browser
   ↓
3. Copy to docs/ (./copy-to-docs.sh)
   ↓
4. Sync to iPhone app (npx cap sync)
   ↓
5. Deploy from Xcode (Cmd+R)
   ↓
6. Test on iPhone
```

## File Locations

- **Source code:** `/Users/zan/z/attention/ToDoApp/`
- **Production (GitHub Pages):** `/Users/zan/z/attention/docs/`
- **iPhone app:** `/Users/zan/z/attention/iPhoneApp/`
- **Xcode project:** `/Users/zan/z/attention/iPhoneApp/ios/App/App.xcworkspace`

## Useful Commands

```bash
# Sync web files to iOS
npx cap sync

# Open in Xcode
npx cap open ios

# Update Capacitor
npm install @capacitor/core@latest @capacitor/cli@latest @capacitor/ios@latest

# Reinstall iOS dependencies
cd ios/App && pod install && cd ../..

# Check Capacitor version
npx cap --version
```

## Configuration

### App ID and Name

Edit `capacitor.config.json`:
```json
{
  "appId": "com.attention.todoapp",
  "appName": "ToDo App",
  "webDir": "www"
}
```

After changing, run:
```bash
npx cap sync
```

### GitHub Configuration

The app uses the same GitHub configuration as the web version.
Edit `www/config.js` to change:
- Repository owner
- Repository name
- File path
- Branch

## Resources

- [Capacitor Documentation](https://capacitorjs.com/docs)
- [iOS Human Interface Guidelines](https://developer.apple.com/design/human-interface-guidelines/ios)
- [Xcode Documentation](https://developer.apple.com/documentation/xcode)

## Support

For issues with:
- **Web app functionality:** Check the main ToDoApp documentation
- **iOS build/deployment:** Check Xcode console for errors
- **Capacitor issues:** See [Capacitor Troubleshooting](https://capacitorjs.com/docs/troubleshooting)

---

**Last Updated:** November 13, 2025
**Capacitor Version:** 7.4.4
**Xcode Version:** 26.1.1
